<div class="todo-wrapper">
  <h2>Yapılacaklar Listesi</h2>

  <div *ngIf="error" class="alert">{{ error }}</div>

  <!-- INPUT BAR -->
  <div class="input-bar">
    <input type="text"
           [(ngModel)]="newTodo.title"
           placeholder="Başlık girin" />
    <input type="text"
           [(ngModel)]="newTodo.description"
           placeholder="Açıklama ekle" />
    <button (click)="addTodo()">Ekle</button>
  </div>

  <!-- FİLTRELER + SAYAÇLAR -->
  <div class="filters">
    <button [class.active]="filter==='all'" (click)="setFilter('all')">Tümü</button>
    <button [class.active]="filter==='active'" (click)="setFilter('active')">Aktif</button>
    <button [class.active]="filter==='completed'" (click)="setFilter('completed')">Tamamlanan</button>
    <div class="counts">
      <span>Toplam: {{ totalCount }}</span>
      <span>Aktif: {{ activeCount }}</span>
      <span>Tamamlanan: {{ completedCount }}</span>
    </div>
  </div>

  <!-- LİSTE -->
  <ul class="list-group">
    <li *ngFor="let todo of filteredTodos()"
        class="list-group-item"
        [class.completed]="todo.isCompleted">
      <div class="left">
        <button class="check" (click)="toggleTodoCompletion(todo)" aria-label="Tamamla/geri al">
          {{ todo.isCompleted ? '✓' : '' }}
        </button>
        <div class="texts">
          <strong>{{ todo.title }}</strong>
          <span *ngIf="todo.description"> — {{ todo.description }}</span>
        </div>
      </div>
      <button class="btn-delete" (click)="deleteTodo(todo.id)">Sil</button>
    </li>
  </ul>

  <p *ngIf="!filteredTodos().length" class="empty">Bu filtrede görev yok.</p>
</div>
